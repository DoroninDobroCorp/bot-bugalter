# ID Matches Bot - Команды

## Основные команды

### `/init_ids`
**Включает/выключает** чат для рассылки кодов.
- При вызове из ветки/топика - автоматически устанавливает этот топик для отправки кодов
- При повторном вызове - отключает чат

### `/idchat`
Показывает ID текущего чата и ветки (если есть)

### `/set_ids_topic`
**Устанавливает** топик/ветку для отправки кодов в этом чате.
- Команда должна быть отправлена **из той ветки**, куда вы хотите отправлять коды
- После установки все коды будут отправляться в эту ветку, независимо от того, откуда пришло сообщение с фото/"лайв"/"прематч"

### `/unset_ids_topic`
**Сбрасывает** настройку топика для этого чата.
- После сброса коды будут отправляться в ответ на сообщение (в ту же ветку, откуда пришло сообщение)

### `/block_topic`
**Блокирует** текущий топик/ветку - бот не будет реагировать на сообщения в этой ветке.
- Команда должна быть отправлена **из той ветки**, которую вы хотите заблокировать
- Полезно для веток типа "Отчеты", где не нужны коды
- Чат остается активным, блокируется только конкретная ветка

### `/unblock_topic`
**Разблокирует** текущий топик/ветку - бот снова будет реагировать на сообщения.
- Команда должна быть отправлена **из той ветки**, которую вы хотите разблокировать

### `/show_ids_config`
**Показывает** текущую конфигурацию для чата:
- Включен ли чат для рассылки
- Установлен ли топик для кодов
- Список заблокированных топиков
- ID текущей ветки и её статус

## Генерация кодов

Бот генерирует коды при:
1. Отправке **фото** в активированном чате
2. Отправке текста **"лайв"** или **"прематч"** (регистр не важен)

## Примеры использования

### Настройка чата с ветками

1. Зайдите в **ветку**, куда хотите получать коды
2. Отправьте `/init_ids` - это включит чат и установит текущую ветку
3. Проверьте настройки: `/show_ids_config`

### Смена ветки для кодов

1. Зайдите в **другую ветку**
2. Отправьте `/set_ids_topic`
3. Теперь все коды будут приходить в эту ветку

### Отключение топика

1. Отправьте `/unset_ids_topic` из любого места в чате
2. Теперь коды будут отправляться в ответ на сообщение (в ту же ветку, откуда пришло фото)

### Блокировка ветки "Отчеты"

1. Зайдите в ветку **"Отчеты"** (или другую, где не нужны коды)
2. Отправьте `/block_topic`
3. Бот больше не будет реагировать на фото/"лайв"/"прематч" в этой ветке
4. В других ветках бот продолжит работать нормально

### Разблокировка ветки

1. Зайдите в заблокированную ветку
2. Отправьте `/unblock_topic`
3. Бот снова начнет реагировать в этой ветке

## Технические детали

- **chats.json** - список активных чатов
- **topics.json** - привязка чатов к конкретным веткам
- **blocked_topics.json** - список заблокированных веток для каждого чата
- Бот проверяет наличие `message_thread_id` для определения, что команда из ветки
